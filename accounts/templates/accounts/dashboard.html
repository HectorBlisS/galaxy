{%extends 'base.html'%}
{%load static%}
{%block content%}
	
	{%if request.user.profile.cover%}
	<section class="hero is-info is-large" style="background-image:url(/media/{{request.user.profile.cover.url}}); background-size:cover; background-position:center; ">
	{%else%}
	<section class="hero is-info is-large" style="background-image:url({% static 'images/cover_default.jpg' %}); background-size:cover; background-position:center; ">
	{%endif%}
		<div class="hero-body">
			<div class="container">
				<h1 class="title avatar-card">
					{% if request.user.profile.avatar %}
						<img src="/media/{{request.user.profile.avatar.url}}">
					{% else %}
						<img src="{% static 'images/geek_paFace.png' %}">
					{% endif %}
					<img src="{%static 'images/lapiz.png'%}" id="edit" class="icon">
					Perfil de <b>{{request.user.first_name}} {{request.user.last_name}}</b>
				</h1>
			</div>
		</div>
	</section>

	<section class="edit-user-form">
		<article class="mid-padding border-radius">

			<div class="header">
				<h1>Editar Perfil</h1>	
			</div>

			<img src="{% static 'images/cerrar.png' %}" id="cerrar" class="icon">

			<form action="." method="post" enctype="multipart/form-data">
				{%csrf_token%}
				{{form_user.as_p}}
				{{form_profile.as_p}}
				<p class="control">
					<input type="submit" class="button is-success">
				</p>
			</form>

		</article>
	</section>
	
	<div class="columns is-multiline card little-margin less-top border-radius mid-padding">
		
		<div class="column is-2" id="menu">
			<div class="">
				<p class="menu-label">
			    General
			  </p>
			  <ul class="menu-list">
			    <li><a class="">Dashboard</a></li>
			    <li><a href="#followers">Followers</a></li>
			    <li><a>Following</a></li>
			  </ul>
			  <p class="menu-label">
			    Administration
			  </p>
			  <ul class="menu-list">
			    <li><a>Stadistics</a></li>
			    <li>
			      <a class="">Search a course</a>
			      <ul>
			        <li><a>Sugestions</a></li>
			        <li><a>Popular</a></li>
			        <li><a>Latest</a></li>
			      </ul>
			    </li>
			    <li><a>Change Password</a></li>
			  </ul>
			  <p class="menu-label">
			    Transactions
			  </p>
			  <ul class="menu-list">
			    <li><a>Payments</a></li>
			  </ul>
			</div>
		</div>

		<div class="column is-6">
			<div class="">
				<!--<form action="" class="">
					{% csrf_token %}
					{{form_profile.as_p}}
					<input type="submit" class="button">
				</form>-->

				
				<div id="action-list">
					{%for action in actions%}
					{%include "actions/action/detail.html"%}
					{%endfor%}
				</div>
				</div>
		</div>

		<div class="column is-4">
			<div class="">
				<div class="card-content">
					<div class="content">
						<h1 class="title">
							Ultimos cursos agregados
						</h1>


						<div class="card">
						  <header class="card-header">
						    <p class="card-header-title">
						      Component
						    </p>
						    <a class="card-header-icon">
						      <span class="icon">
						        <i class="fa fa-angle-down"></i>
						      </span>
						    </a>
						  </header>
						  <div class="card-content">
						    <div class="content">
						      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus nec iaculis mauris.
						      <a>@bulmaio</a>. <a>#css</a> <a>#responsive</a>
						      <br>
						      <small>11:09 PM - 1 Jan 2016</small>
						    </div>
						  </div>
						  <footer class="card-footer">
						    <a class="card-footer-item">Save</a>
						    <a class="card-footer-item">Edit</a>
						    <a class="card-footer-item">Delete</a>
						  </footer>
						</div>


					</div>
				</div>
			</div>
		</div>

		<div class="column is-6" id="followers">
			<div class="card-content">
				<div class="content">
					<h1 class="titl">
						Followers
					</h1>

					<div>
						{% for f in request.user.followers.all %}
							<p><a href="{{f.get_absolute_url}}">{{f.username}}</a></p>
						{%empty%}
							No tienes seguidores
						{% endfor %}
					</div>

				</div>
			</div>
		</div>

		<div class="column is-6" id="following">
			<div class="card-content">
				<div class="content">
					<h1 class="titl">
						Following
					</h1>

					<div class="columns is-multiline">
						{% for f in request.user.following.all %}
							<div class="column is-3">
								
								<div class="tag is-medium">
									<a href="{{f.get_absolute_url}}" class="media">
										{% if f.profile.avatar %}
											<img class="image is-24x24 media-left" src="/media/{{f.user.profile.avatar.url}}">
										{% else %}
											<img class="image is-24x24" src="{% static 'images/geek_paFace.png' %}">
										{% endif %}
										<span class="media-right">{{f.username}}</span>
									</a>
								</div>

							</div>
						{%empty%}
							No sigues a nadie
						{% endfor %}
					</div>

				</div>
			</div>
		</div>

		<div class="column is-6" id="stadistics">
			<div class="card-content">
				<div class="content">
					<h1 class="titl">
						Stadistics
					</h1>
				</div>
			</div>
		</div>

	</div>
{%endblock content%}

{%block domready%}

	$('label').addClass('label')
	$('input').addClass('input')
	$('.button').removeClass('input')
	$('textarea').addClass('textarea')

	$('#edit').on('click', function(){
		$('.edit-user-form').toggleClass('set-visible');
		console.log('form visible');
		$('#capa-negra').toggleClass('set-visible');
		console.log('capa visible');
	});
	
	$('#cerrar').on('click', function(){
		$('.edit-user-form').toggleClass('set-visible');
		$('#capa-negra').toggleClass('set-visible');
	});

{%endblock domready%}