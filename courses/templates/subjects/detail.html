{% extends "base2.html" %}

{% load embed_video_tags %}
{% block content %}

	<style>
		.top{
			padding-top: 10%;
		}
		.top-mitad{
			padding-top: 5%
		}

		.remove-margin{
			margin: 0 !important;
			padding: 0 !important;
		}

		.top-all{
			margin-left: 5%;
			margin-right: 2%;
		}

		.nav_higher{
			height: 10% !important;
		}

		.image-subject{
			border-radius: 50%;
			-webkit-transition: -webkit-transform .8s ease-in-out;
			transition: -webkit-transform .8s ease-in-out;
			padding: 5%;
		}

		.image-subject:hover{
			-webkit-transform: rotate(360deg);
			transform: rotate(360deg);
		}

		.padding-lateral{
			padding-right: 10%;
			padding-left: 10%;
		}

		.padding-description{
			padding-right: 3%;
			padding-left: 3%;
		}
		
		.padding-lateral-icons{
			padding-right: 5%;
			padding-left: 5%;
			opacity: 0.6;
		}

		.padding-lateral-icons:hover{
			opacity: 1;
			-webkit-transition: opacity .5s ease-in-out;
			transition: opacity .5s ease-in-out;
		}
		.droptown{
			position: absolute;
			top: 100%;
			background-color: #F5F5F5;
			display: block;
			z-index: 999;
		}
		
		.margin{
			padding-top: 5%;
			padding-bottom: 5%;
		}

		.margin10{
			padding-top: 7%;
			padding-bottom: 7%;
		}

		.color-cursos{
			/*background-color: #3273DC;*/
			background-color: #38A9F6;
		}

		.color-cursos:hover{
			background-color: #2E8CCC;
			-webkit-transition: background-color .6s ease-in-out;
			transition: background-color .5s ease-in-out;
		}

		.color-curso-selected{
			background-color: #2E8CCC;
		}

		.fixeded{
			position: fixed;
		}

		.scroll{
			overflow-y: scroll;
			height: 100%;
		}

		::-webkit-scrollbar{
			display: none;
		}

		.border-bye{
			border-top: 0px !important;
			margin-top: 0px !important;
			padding-top: 0px !important;
		}

		.icon-desplegable:hover{
			color: #38A9F6;
			-webkit-transition: color .5s ease-in-out;
			transition: color .5s ease-in-out;
		}

		.padding-icons{
			padding-left: 2%;
		}

	</style>

	<section class="columns remove-margin">

		<div class="column is-one-quarter is-fullheight is-fullwidth notification has-text-centered remove-margin fixeded scroll" style="background-color: #38A9F6; color:white">

			<!--<h2 class="title top">{{subject.title}} ({{courses|length}})</h2>-->
			<h5 class="title top">Selecciona un curso!</h5>
			<hr>

			<div class="container" style="text-align:justify">
			{% if courses %}
				<ul>
				{% for course in courses %}
					
					{% if course_selected.title == course.title %}

						<a href="{%url 'courses:subject_detail_with_course' subject.slug course.slug%}">
							<!--<div class="card is-fullwidth top-all color-curso-selected">
								<div class="card-content">
									<div class="content" style="color: white">
										<p class="title is-4"><strong>{{course.title}}</strong></p>
										<p class="subtitle is-6 top-mitad">{{course.overview}}</p>
									</div>
								</div>
							</div>-->
							<li>
								<div class="content padding-lateral margin10 color-curso-selected" style="color: white">
										<p class="title is-4"><strong>{{course.title}}</strong></p>
										<p class="subtitle is-6 top-mitad">{{course.overview}}</p>
								</div>
							</li>
						</a>

					{% else %}

					<a href="{%url 'courses:subject_detail_with_course' subject.slug course.slug%}">
						<!--<div class="card is-fullwidth top-all color-cursos">
							<div class="card-content">
								<div class="content" style="color: white">
									<p class="title is-4"><strong>{{course.title}}</strong></p>
									<p class="subtitle is-6 top-mitad">{{course.overview}}</p>
								</div>
							</div>
						</div>-->
						<li>
							<div class="content padding-lateral margin10 color-cursos" style="color: white">
										<p class="title is-4"><strong>{{course.title}}</strong></p>
										<p class="subtitle is-6 top-mitad">{{course.overview}}</p>
							</div>
						</li>
					</a>

					{% endif %}
				{% endfor %}
			</ul>
			{% else %}

				<h1 class="title" style="text-align:center;">Aún no hay cursos :(</h1>
			{% endif %}
			</div>
		</div>

		<div class="column remove-margin" style="margin-left:25% !important;">
			<article class="media">
				<div class="media-left remove-margin" id="button-languajes" style="position:relative;">
					<p class="remove-margin">
						<a href="{% url 'courses:subject_detail' subject.slug %}"><img src="{{subject.image.url}}" class="image is-64x64 image-subject icon-desplegable"></a>
					</p>
				<div class="droptown remove-margin" style="display: none; background-color: white;">
					<ul class="padding-icons">
						{% for languaje in languajes %}
							<li class="margin">
							<a href="{%url 'courses:subject_detail' languaje.slug%}">
								<img src="{{languaje.image.url}}" alt="" class="image is-64x64 image-subject">
							</a>
							</li>
						{% endfor %}
					</ul>
				</div>
				</div>
				<span class="icon is-medium" style="padding-top: 1%;">
						<i class="fa fa-sort-down icon-desplegable"></i>
						</span>
				
			{% if course_selected %}
					
				<div class="media-content">
					<div class="content columns" style="text-align:center; padding-top: 2%;">
						<div class="column is-8">
							<h1 class="title" style="padding-right:64px;">{{course_selected.title}}</h1>	
						</div>
						<span class="column is-3" style="text-align:justify; padding-top: 2%;">
					<a href="{%url 'user_detail' course_selected.owner.username%}"><p class="subtitle">Instructor: {{course_selected.owner}}</p></a></span>
					</div>
				</div>
				<hr>
			</article>

			<div class="container padding-lateral" style="position:relative; padding-bottom:5%; padding-top: 1em;">
				{% for module in modules %}

					<div class="box open_items" id="{{module.order}}">
						<article class="media">
							<div class="media-left column is-4">
								<div class="content">
									<h3 class="title">{{module.title}}</h3>
								</div>
							</div>
							<div class="media-content column is-7">
								<div style="padding-top:1%;" class="column is-10">
									<progress style="position:relative" class="progress is-success" value="80" max="100"><span style="position:absolute;">80%</span></progress>
								</div>
							</div>
						</article>
						<article class="media border-bye">
							<div class="media-content column is-12">
								<p class="subtitle is-5">{{module.description}}</p>
							</div>
						</article>
						<article class="media top-mitad" id="{{module.order}}_droptown" style="display:none">
							<div class="media-content">
								{% if module.contents.all.count != 0 %}
									
								{% for content in module.contents.all %}
									<a href="#">
										<img src="/media/images/icons/{{content.content_type}}.svg" alt="" class="padding-lateral-icons">
									</a>
								{% endfor %}
								
								{% else %}
									<p>No hay contenido en este módulo :(</p>
								{% endif %}
							</div>
						</article>
					</div>
				{% endfor %}
			</div>
			{% else %}
				<div class="media-content">
					<div class="content" style="text-align: center; padding-top: 2%;">
						<h1 class="title" style="padding-right:64px;">{{subject.title}}</h1>
					</div>
				</div>
				<hr>
			</article>
				<div class="container" style="position:absolute; text-align:justify; padding-top: 1em;">
					<div class="video" style="text-align:center;">
						{% video subject.video 'small' %}
					</div>
					<h1 class="title is-5 top-mitad padding-lateral">{{subject.description}}</h1>
				</div>
			{% endif %}
		</div>
		
	</section>
	
	
{% endblock content %}
{% block domready %}
		
		$('.icon-desplegable').on('click', function(){
			console.log("Hola");
			$('.droptown').slideToggle();
		});

		$('.open_items').on('click',function(){
			let id = $(this).attr('id');
			console.log(id);
			$('#'+id+'_droptown').slideToggle('slow');
		});

	{% endblock domready %}